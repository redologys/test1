<!DOCTYPE html>
<html lang="en" class="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sell Your Device - Mobile Experts Inc</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Material Symbols -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <script>
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#FFD600",
                        "hot-pink": "#FF00FF",
                        "background-light": "#f8f8f5",
                        "background-dark": "#1a1a1a",
                        "gray-light": "#F5F5F5",
                    },
                    fontFamily: {
                        "display": ["Space Grotesk", "sans-serif"]
                    },
                    backgroundImage: {
                        'hero-gradient': 'linear-gradient(135deg, #FF00FF 0%, #FF8C00 100%)',
                    },
                    borderRadius: { "DEFAULT": "0", "lg": "0", "xl": "0", "full": "0" },
                    animation: {
                        'marquee': 'marquee 30s linear infinite',
                        'marquee-slow': 'marquee 45s linear infinite',
                        'glitch': 'glitch 0.2s steps(4)',
                        'shake': 'shake 0.2s linear 3',
                        'pop-in': 'pop-in 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards',
                    },
                    keyframes: {
                        marquee: {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(-50%)' },
                        },
                        glitch: {
                            '0%, 100%': { transform: 'translate(0)' },
                            '25%': { transform: 'translate(-3px, 3px)' },
                            '50%': { transform: 'translate(3px, -3px)' },
                            '75%': { transform: 'translate(-3px, -3px)' },
                        },
                        'pop-in': {
                            '0%': { transform: 'scale(0.8)', opacity: '0' },
                            '100%': { transform: 'scale(1)', opacity: '1' },
                        }
                    }
                },
            },
        }
    </script>
    <style>
        /* ========================================
           PREMIUM DESIGN SYSTEM
           ======================================== */
        
        /* BASE TRANSITIONS */
        *, *::before, *::after { 
            transition: transform 250ms cubic-bezier(0.4, 0, 0.2, 1), 
                        box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1), 
                        background-color 200ms ease-out, 
                        color 200ms ease-out, 
                        border-color 200ms ease-out, 
                        opacity 200ms ease-out; 
        }
        html { scroll-behavior: smooth; }
        
        /* SCROLLBAR HIDE */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* SHADOW HIERARCHY */
        .shadow-sm { box-shadow: 0 2px 8px rgba(0,0,0,0.04); }
        .shadow-md { box-shadow: 0 4px 16px rgba(0,0,0,0.08); }
        .shadow-lg { box-shadow: 0 12px 32px rgba(0,0,0,0.12); }

        /* NAV LINKS */
        .brutalist-nav-link { position: relative; font-weight: 700; letter-spacing: 0.01em; }
        .brutalist-nav-link::after {
            content: ''; position: absolute; bottom: 0; left: 50%; width: 0; height: 3px;
            background: #ffd400; transition: all 250ms ease; transform: translateX(-50%);
        }
        .brutalist-nav-link:hover { background-color: black; color: #ffd400; transform: translateY(-2px); }
        .brutalist-nav-link:hover::after { width: 80%; }
        .brutalist-nav-link:active { transform: scale(0.98); }
        .brutalist-nav-link:focus { outline: 3px solid #ffd400; outline-offset: 2px; }

        /* CARDS */
        .brutalist-card { border: 3px solid black; background: white; box-shadow: 4px 4px 0px 0px black; transition: all 300ms cubic-bezier(0.34, 1.56, 0.64, 1); }
        .brutalist-card:hover { transform: translate(-6px, -6px); box-shadow: 12px 12px 0px 0px black; }
        
        /* BUTTONS */
        .brutalist-btn { font-weight: 800; letter-spacing: 0.02em; cursor: pointer; }
        .brutalist-btn:hover { transform: translateY(-3px) scale(1.02); box-shadow: 0 8px 24px rgba(0,0,0,0.2); }
        .brutalist-btn:active { transform: translate(2px, 2px) scale(0.98) !important; box-shadow: 2px 2px 0px black !important; }
        .brutalist-btn:focus { outline: 3px solid #ffd400; outline-offset: 2px; }

        /* SCROLL ANIMATIONS */
        .reveal-on-scroll { opacity: 0; transform: translateY(30px); }
        .reveal-on-scroll.is-visible { opacity: 1; transform: translateY(0); transition: opacity 600ms ease-out, transform 600ms cubic-bezier(0.4, 0, 0.2, 1); }

        /* MENU DRAWER */
        @keyframes slideInRight { from { transform: translateX(100%); } to { transform: translateX(0); } }
        .drawer-open { animation: slideInRight 0.25s cubic-bezier(0.4, 0, 0.2, 1) forwards; }

        /* FORM INPUTS */
        .brutalist-input:focus { outline: none; border-color: #FFD600 !important; box-shadow: 4px 4px 0px #FFD600; }
        input:focus, select:focus, textarea:focus { outline: none; border-color: #ffd400 !important; box-shadow: 4px 4px 0px 0px #ffd400; }
        .condition-option:checked + label { background-color: #FFD600; border-color: black; box-shadow: 4px 4px 0px black; }
        input[type="radio"]:checked + div { background-color: black; color: white; box-shadow: 4px 4px 0px #FFD600; }

        /* TYPOGRAPHY */
        h1, h2, h3 { letter-spacing: -0.02em; line-height: 1.1; }
        p { line-height: 1.6; }
        button, a { min-height: 44px; }
    </style>
</head>
<body class="bg-background-light font-display text-black antialiased selection:bg-black selection:text-primary relative overflow-x-hidden">

    <!-- Mobile Menu Drawer (Consistent) -->
    <div id="mobile-menu" class="fixed inset-y-0 right-0 z-50 w-80 translate-x-full border-l-[3px] border-black bg-white shadow-[-8px_0px_0px_0px_rgba(0,0,0,0.1)] md:hidden">
        <div class="flex h-full flex-col">
            <div class="flex items-center justify-between border-b-[3px] border-black bg-primary p-6">
                <h2 class="text-xl font-black uppercase">Menu</h2>
                <button id="close-menu" class="text-black hover:bg-black hover:text-primary p-1 border-[2px] border-transparent hover:border-black"><span class="material-symbols-outlined text-3xl">close</span></button>
            </div>
            <nav class="flex flex-col p-6 gap-4">
                <a href="repairs.html" class="block border-[3px] border-black bg-white p-4 text-center text-lg font-bold uppercase brutalist-nav-link">Repairs</a>
                <a href="inventory.html" class="block border-[3px] border-black bg-white p-4 text-center text-lg font-bold uppercase brutalist-nav-link">Inventory</a>
                <a href="sell.html" class="block border-[3px] border-black bg-primary p-4 text-center text-lg font-bold uppercase brutalist-nav-link">Sell</a>
                <a href="contact.html" class="block border-[3px] border-black bg-white p-4 text-center text-lg font-bold uppercase brutalist-nav-link">Contact</a>
            </nav>
        </div>
    </div>
    <div id="menu-overlay" class="fixed inset-0 z-40 hidden bg-black/50 backdrop-blur-sm"></div>

    <div class="min-h-screen flex flex-col p-4 md:p-8">
        <div class="mx-auto flex w-full max-w-[1400px] flex-col border-[3px] border-black bg-white shadow-[8px_8px_0px_0px_black] relative z-10">
            
            <!-- Marquee -->
            <div class="w-full overflow-hidden border-b-[3px] border-black bg-black py-4">
                <div class="whitespace-nowrap flex animate-marquee-slow w-[200%] text-primary font-bold uppercase tracking-wider text-sm md:text-base">
                    <span class="w-1/2 flex-shrink-0 text-center px-4">MOBILE EXPERTS INC ‚Ä¢ BROOKLYN ‚Ä¢ OPEN 7 DAYS ‚Ä¢ (929) 789-2786 ‚Ä¢ TOP PRICES PAID ‚Ä¢ </span>
                    <span class="w-1/2 flex-shrink-0 text-center px-4">MOBILE EXPERTS INC ‚Ä¢ BROOKLYN ‚Ä¢ OPEN 7 DAYS ‚Ä¢ (929) 789-2786 ‚Ä¢ TOP PRICES PAID ‚Ä¢ </span>
                </div>
            </div>

            <!-- Header -->
            <header class="flex flex-col border-b-[3px] border-black md:flex-row bg-white relative z-40">
                <div class="flex items-center justify-between border-b-[3px] border-black bg-primary px-6 py-5 md:w-auto md:border-b-0 md:border-r-[3px]">
                    <div class="flex items-center gap-3 cursor-pointer hover:animate-glitch" onclick="window.location.href='index.html'">
                        <span class="material-symbols-outlined text-4xl font-black">bolt</span>
                        <h1 class="text-2xl font-black uppercase leading-none tracking-tighter">MOBILE<br>EXPERTS</h1>
                    </div>
                    <button id="open-menu" class="md:hidden p-2 hover:bg-black hover:text-white border-[3px] border-transparent hover:border-black rounded-none">
                        <span class="material-symbols-outlined text-3xl">menu</span>
                    </button>
                </div>
                <nav class="hidden md:flex flex-1 flex-row">
                    <a href="repairs.html" class="flex flex-1 items-center justify-center border-r-[3px] border-black bg-white px-6 py-4 text-lg font-bold uppercase brutalist-nav-link">Repairs</a>
                    <a href="inventory.html" class="flex flex-1 items-center justify-center border-r-[3px] border-black bg-white px-6 py-4 text-lg font-bold uppercase brutalist-nav-link whitespace-nowrap">
                        <span class="mr-2 hidden material-symbols-outlined md:inline-block">inventory_2</span>
                        Inventory
                    </a>
                    <a href="sell.html" class="flex flex-1 items-center justify-center border-r-[3px] border-black bg-primary px-6 py-4 text-lg font-bold uppercase brutalist-nav-link">Sell</a>
                    <a href="contact.html" class="flex flex-1 items-center justify-center bg-white px-6 py-4 text-lg font-bold uppercase brutalist-nav-link">Contact</a>
                </nav>
            </header>

            <!-- Hero -->
            <section class="reveal-on-scroll bg-hero-gradient border-b-[3px] border-black p-12 min-h-[500px] flex flex-col justify-center text-center relative overflow-hidden">
                <h1 class="text-5xl md:text-8xl font-black uppercase leading-[0.9] tracking-tighter mb-4 text-white hover:animate-glitch drop-shadow-[4px_4px_0px_black]">Turn Your Old Tech<br>Into Cash</h1>
                <p class="text-xl md:text-2xl font-bold uppercase mb-8 text-white drop-shadow-[2px_2px_0px_black]">Get instant quotes and top dollar for phones, tablets & laptops</p>
                <div class="flex justify-center mb-8">
                    <button onclick="document.getElementById('calculator').scrollIntoView()" class="bg-black text-white border-[3px] border-white px-12 py-6 text-xl font-black uppercase hover:bg-white hover:text-black hover:border-black shadow-[8px_8px_0px_0px_black]">Get Instant Quote</button>
                </div>
                <p class="text-white font-bold uppercase tracking-widest text-sm drop-shadow-[1px_1px_0px_black]">‚Ä¢ Same-Day Payment ‚Ä¢ Top Prices ‚Ä¢ No Hidden Fees ‚Ä¢</p>
            </section>
            <!-- Enhanced Device Value Calculator -->
            <section id="enhanced-calculator" class="reveal-on-scroll p-4 md:p-12 border-b-[3px] border-black bg-gray-50">
                <div class="max-w-4xl mx-auto border-[4px] border-black bg-white shadow-[16px_16px_0px_0px_black] overflow-hidden">
                    <div class="bg-primary p-6 text-black text-center border-b-[3px] border-black">
                        <h2 class="text-3xl font-black uppercase tracking-tighter">GET YOUR INSTANT QUOTE</h2>
                        <p class="font-bold uppercase tracking-widest text-sm">Select your device for an accurate trade-in value</p>
                    </div>
                    
                    

                    <!-- Quick Quote Tab Content -->
                    <div id="quick-tab" class="tab-pane p-6 md:p-10 active">
                        <form id="calculatorForm">
                            <!-- Step 1: Device Type -->
                            <div class="calc-step active" data-step="1">
                                <h3 class="text-xl font-black uppercase mb-6 flex items-center gap-2">
                                    <span class="bg-black text-white px-2 py-1 text-xs">01</span> Select Device Type
                                </h3>
                                <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                                    <button type="button" onclick="selectDevice('phone')" class="device-type-btn border-[3px] border-black p-6 hover:bg-primary transition-none flex flex-col items-center gap-2">
                                        <span class="material-symbols-outlined text-4xl">smartphone</span>
                                        <span class="font-black uppercase text-sm">Phone</span>
                                    </button>
                                    <button type="button" onclick="selectDevice('laptop')" class="device-type-btn border-[3px] border-black p-6 hover:bg-primary transition-none flex flex-col items-center gap-2">
                                        <span class="material-symbols-outlined text-4xl">laptop_mac</span>
                                        <span class="font-black uppercase text-sm">Laptop</span>
                                    </button>
                                    <button type="button" onclick="selectDevice('tablet')" class="device-type-btn border-[3px] border-black p-6 hover:bg-primary transition-none flex flex-col items-center gap-2">
                                        <span class="material-symbols-outlined text-4xl">tablet_mac</span>
                                        <span class="font-black uppercase text-sm">Tablet</span>
                                    </button>
                                    <button type="button" onclick="selectDevice('watch')" class="device-type-btn border-[3px] border-black p-6 hover:bg-primary transition-none flex flex-col items-center gap-2">
                                        <span class="material-symbols-outlined text-4xl">watch</span>
                                        <span class="font-black uppercase text-sm">Watch</span>
                                    </button>
                                </div>
                            </div>

                            <!-- Step 2: Brand & Model -->
                            <div class="calc-step hidden" data-step="2">
                                <h3 class="text-xl font-black uppercase mb-6 flex items-center gap-2">
                                    <button type="button" onclick="prevCalcStep()" class="hover:underline">‚Üê BACK</button>
                                    <span class="bg-black text-white px-2 py-1 text-xs">02</span> Select Brand & Model
                                </h3>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                                    <div>
                                        <label class="font-black uppercase text-xs mb-2 block">Brand</label>
                                        <select id="brandSelect" onchange="loadModels()" class="w-full border-[3px] border-black p-4 font-bold uppercase bg-white focus:shadow-[4px_4px_0px_black] outline-none">
                                            <option value="">Choose brand...</option>
                                            <option value="apple">Apple</option>
                                            <option value="samsung">Samsung</option>
                                            <option value="google">Google</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="font-black uppercase text-xs mb-2 block">Model</label>
                                        <select id="modelSelect" class="w-full border-[3px] border-black p-4 font-bold uppercase bg-white focus:shadow-[4px_4px_0px_black] outline-none">
                                            <option value="">Select brand first...</option>
                                        </select>
                                    </div>
                                </div>
                                <h4 class="font-black uppercase text-xs mb-4">Storage Capacity</h4>
                                <div class="flex flex-wrap gap-2 mb-8" id="storageGrid">
                                    <button type="button" onclick="selectStorage('128')" class="storage-btn border-[2px] border-black px-4 py-2 font-bold uppercase text-sm hover:bg-black hover:text-white transition-none">128GB</button>
                                    <button type="button" onclick="selectStorage('256')" class="storage-btn border-[2px] border-black px-4 py-2 font-bold uppercase text-sm hover:bg-black hover:text-white transition-none">256GB</button>
                                    <button type="button" onclick="selectStorage('512')" class="storage-btn border-[2px] border-black px-4 py-2 font-bold uppercase text-sm hover:bg-black hover:text-white transition-none">512GB</button>
                                    <button type="button" onclick="selectStorage('1024')" class="storage-btn border-[2px] border-black px-4 py-2 font-bold uppercase text-sm hover:bg-black hover:text-white transition-none">1TB</button>
                                </div>
                                <button type="button" onclick="nextCalcStep()" class="w-full bg-black text-white p-4 font-black uppercase hover:bg-primary hover:text-black transition-none border-[3px] border-black shadow-[6px_6px_0px_black] active:shadow-none active:translate-x-1 active:translate-y-1">Continue ‚Üí</button>
                            </div>

                            <!-- Step 3: Condition -->
                            <div class="calc-step hidden" data-step="3">
                                <h3 class="text-xl font-black uppercase mb-6 flex items-center gap-2">
                                    <button type="button" onclick="prevCalcStep()" class="hover:underline">‚Üê BACK</button>
                                    <span class="bg-black text-white px-2 py-1 text-xs">03</span> Overall Condition
                                </h3>
                                <input type="range" id="conditionSlider" min="0" max="4" value="3" oninput="updateConditionUI(this.value)" class="w-full h-8 appearance-none bg-primary border-[3px] border-black cursor-pointer mb-2">
                                <div class="flex justify-between font-black uppercase text-[10px] mb-8">
                                    <span>Poor</span>
                                    <span>Fair</span>
                                    <span>Good</span>
                                    <span>Best</span>
                                </div>
                                <div id="conditionStatus" class="bg-black text-primary p-4 text-center font-black uppercase text-xl mb-8 border-[3px] border-black">Very Good üòä</div>
                                
                                <h4 class="font-black uppercase text-xs mb-4">Functional Checklist</h4>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8">
                                    <label class="flex items-center gap-3 border-[2px] border-black p-3 hover:bg-primary/20 cursor-pointer">
                                        <input type="checkbox" checked class="form-checkbox border-2 border-black rounded-none">
                                        <span class="font-bold uppercase text-sm">Powers On</span>
                                    </label>
                                    <label class="flex items-center gap-3 border-[2px] border-black p-3 hover:bg-primary/20 cursor-pointer">
                                        <input type="checkbox" checked class="form-checkbox border-2 border-black rounded-none">
                                        <span class="font-bold uppercase text-sm">Screen Intact</span>
                                    </label>
                                    <label class="flex items-center gap-3 border-[2px] border-black p-3 hover:bg-primary/20 cursor-pointer">
                                        <input type="checkbox" checked class="form-checkbox border-2 border-black rounded-none">
                                        <span class="font-bold uppercase text-sm">Unlocked</span>
                                    </label>
                                    <label class="flex items-center gap-3 border-[2px] border-black p-3 hover:bg-primary/20 cursor-pointer">
                                        <input type="checkbox" checked class="form-checkbox border-2 border-black rounded-none">
                                        <span class="font-bold uppercase text-sm">No Water Damage</span>
                                    </label>
                                </div>
                                <button type="button" onclick="calculateFinalOffer()" class="w-full bg-black text-white p-4 font-black uppercase hover:bg-primary hover:text-black transition-none border-[3px] border-black shadow-[6px_6px_0px_black]">Get Offer Now</button>
                            </div>

                            <!-- Step 4: Results -->
                            <div class="calc-step hidden" data-step="4">
                                <div class="text-center mb-8">
                                    <h3 class="text-3xl font-black uppercase mb-2">Your Instant Offer</h3>
                                    <div id="finalOfferPrice" class="text-7xl md:text-8xl font-black text-primary text-stroke tracking-tighter">$480</div>
                                    <p id="resultDeviceName" class="font-black uppercase tracking-widest mt-2">iPhone 14 Pro ‚Ä¢ 256GB ‚Ä¢ Good</p>
                                </div>

                                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                                    <!-- External Price Comparison -->
                                    <div class="border-[3px] border-black p-4 bg-white">
                                        <h4 class="font-black uppercase text-sm mb-4 border-b-2 border-black pb-2">üîç Compare Prices</h4>
                                        <p class="text-xs font-bold mb-4 opacity-60">See what others are offering for similar devices:</p>
                                        <div class="space-y-3">
                                            <a href="https://www.backmarket.com/" target="_blank" class="block border-[2px] border-black p-3 hover:bg-primary/20 transition-none">
                                                <div class="flex justify-between items-center">
                                                    <div>
                                                        <span class="font-black uppercase text-sm">Backmarket</span>
                                                        <p class="text-xs opacity-60">Refurbished marketplace</p>
                                                    </div>
                                                    <span class="material-symbols-outlined">arrow_outward</span>
                                                </div>
                                            </a>
                                            <a href="https://swappa.com/buy" target="_blank" class="block border-[2px] border-black p-3 hover:bg-primary/20 transition-none">
                                                <div class="flex justify-between items-center">
                                                    <div>
                                                        <span class="font-black uppercase text-sm">Swappa</span>
                                                        <p class="text-xs opacity-60">Used phones marketplace</p>
                                                    </div>
                                                    <span class="material-symbols-outlined">arrow_outward</span>
                                                </div>
                                            </a>
                                            <a href="https://www.gazelle.com/" target="_blank" class="block border-[2px] border-black p-3 hover:bg-primary/20 transition-none">
                                                <div class="flex justify-between items-center">
                                                    <div>
                                                        <span class="font-black uppercase text-sm">Gazelle</span>
                                                        <p class="text-xs opacity-60">Trade-in service</p>
                                                    </div>
                                                    <span class="material-symbols-outlined">arrow_outward</span>
                                                </div>
                                            </a>
                                        </div>
                                        <div class="mt-4 p-2 bg-primary border-2 border-black text-xs font-black uppercase text-center">
                                            üí∞ We often beat competitor prices!
                                        </div>
                                    </div>
                                    <!-- Actions -->
                                    <div class="flex flex-col gap-4 justify-center">
                                        <button type="button" onclick="lockInOffer()" class="bg-primary border-[3px] border-black p-4 font-black uppercase shadow-[6px_6px_0px_black] hover:translate-x-1 hover:translate-y-1 hover:shadow-none active:scale-95">Lock In Offer (48 Hours)</button>
                                        <button type="button" onclick="emailQuote()" class="bg-black text-white border-[3px] border-black p-4 font-black uppercase shadow-[6px_6px_0px_black] hover:translate-x-1 hover:translate-y-1 hover:shadow-none active:scale-95">Email This Quote</button>
                                        <div class="text-[10px] font-bold text-center uppercase text-gray-400">Time remaining: <span id="offerCountdown" class="text-black">47:59:59</span></div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    
                </div>
            </section>

            <!-- Price History Script -->
            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script>
                // Calculator State
                let calcState = { step: 1, type: '', brand: '', model: '', storage: '', condition: 3 };
                const deviceDb = {
                    'apple': ['iPhone 14 Pro Max', 'iPhone 14 Pro', 'iPhone 13', 'iPad Pro M2'],
                    'samsung': ['S23 Ultra', 'S22 Ultra', 'Z Fold 5'],
                    'google': ['Pixel 7 Pro', 'Pixel 6']
                };

                const pricing = {
                    'iPhone 14 Pro Max': 700,
                    'iPhone 14 Pro': 600,
                    'iPhone 13': 400,
                    'S23 Ultra': 550
                };

                function switchTab(tab) {
                    document.querySelectorAll('.calc-tab').forEach(t => t.classList.remove('bg-primary'));
                    document.querySelectorAll('.tab-pane').forEach(p => p.classList.add('hidden'));
                    document.getElementById('tab-' + tab).classList.add('bg-primary');
                    document.getElementById(tab + '-tab').classList.remove('hidden');
                }

                function selectDevice(type) {
                    calcState.type = type;
                    nextCalcStep();
                }

                function loadModels() {
                    const brand = document.getElementById('brandSelect').value;
                    const select = document.getElementById('modelSelect');
                    select.innerHTML = '<option>Select Model...</option>';
                    if (brand && deviceDb[brand]) {
                        deviceDb[brand].forEach(m => select.innerHTML += `<option value="${m}">${m}</option>`);
                    }
                }

                function selectStorage(val) {
                    calcState.storage = val;
                    document.querySelectorAll('.storage-btn').forEach(b => b.classList.remove('bg-black', 'text-white'));
                    event.target.classList.add('bg-black', 'text-white');
                }

                function nextCalcStep() {
                    document.querySelector(`.calc-step[data-step="${calcState.step}"]`).classList.add('hidden');
                    calcState.step++;
                    document.querySelector(`.calc-step[data-step="${calcState.step}"]`).classList.remove('hidden');
                }

                function prevCalcStep() {
                    document.querySelector(`.calc-step[data-step="${calcState.step}"]`).classList.add('hidden');
                    calcState.step--;
                    document.querySelector(`.calc-step[data-step="${calcState.step}"]`).classList.remove('hidden');
                }

                function updateConditionUI(val) {
                    const labels = ["Scrap üíÄ", "Poor ü§ï", "Fair üòê", "Good üôÇ", "Best ü§©"];
                    document.getElementById('conditionStatus').textContent = labels[val];
                    calcState.condition = val;
                }

                function calculateFinalOffer() {
                    const model = document.getElementById('modelSelect').value;
                    const base = pricing[model] || 300;
                    const multipliers = [0.2, 0.4, 0.7, 0.9, 1.0];
                    const final = Math.round(base * multipliers[calcState.condition]);
                    
                    document.getElementById('finalOfferPrice').textContent = '$' + final;
                    document.getElementById('resultDeviceName').textContent = `${model} ‚Ä¢ ${calcState.storage}GB`;
                    nextCalcStep();
                    renderChart();
                    startCountdown();
                    
                    // Store for exit intent
                    localStorage.setItem('pendingQuote', JSON.stringify({ device: model, price: final }));
                }

                function renderChart() {
                    const ctx = document.getElementById('priceHistoryChart').getContext('2d');
                    new Chart(ctx, {
                        type: 'line',
                        data: {
                            labels: ['J','F','M','A','M','J','J','A','S','O','N','D'],
                            datasets: [{
                                label: 'Value',
                                data: [650, 630, 620, 600, 580, 550, 540, 520, 500, 490, 485, 480],
                                borderColor: '#FFD600',
                                borderWidth: 4,
                                tension: 0,
                                fill: false,
                                pointBackgroundColor: 'black'
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: { 
                                x: { grid: { display: false }, ticks: { font: { weight: 'bold' } } },
                                y: { grid: { color: '#eee' }, ticks: { font: { weight: 'bold' } } }
                            }
                        }
                    });
                }

                function startCountdown() {
                    let time = 172800; // 48 hours
                    setInterval(() => {
                        time--;
                        const h = Math.floor(time / 3600);
                        const m = Math.floor((time % 3600) / 60);
                        const s = time % 60;
                        document.getElementById('offerCountdown').textContent = `${h}:${m}:${s}`;
                    }, 1000);
                }

                // AI ANALYSIS MOCK
                function handleFiles(files) {
                    const grid = document.getElementById('photoPreviewGrid');
                    grid.innerHTML = '';
                    Array.from(files).forEach(f => {
                        const reader = new FileReader();
                        reader.onload = e => grid.innerHTML += `<div class="border-2 border-black aspect-square bg-cover bg-center" style="background-image: url(${e.target.result})"></div>`;
                        reader.readAsDataURL(f);
                    });
                    document.getElementById('analyzeBtn').disabled = files.length < 2;
                }

                async function analyzePhotos() {
                    document.getElementById('analyzeText').textContent = "ü§ñ THINKING...";
                    await new Promise(r => setTimeout(r, 2000));
                    document.getElementById('aiResults').classList.remove('hidden');
                    document.getElementById('analyzeBtn').classList.add('hidden');
                    document.getElementById('uploadZone').classList.add('hidden');
                    document.getElementById('photoPreviewGrid').classList.add('hidden');
                }
            </script>

            <style>
                .calc-step { animation: brutalSlide 0.2s linear forwards; }
                @keyframes brutalSlide { from { transform: translateY(10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
                .text-stroke-sm { -webkit-text-stroke: 1.5px black; }
            </style>

            <!-- Trade In Values Table -->
            <section class="reveal-on-scroll border-b-[3px] border-black bg-white p-8 md:p-12">
                <h2 class="text-3xl font-black uppercase text-center mb-8">Current Trade-In Prices</h2>
                 <div class="overflow-x-auto">
                    <table class="w-full min-w-[600px] border-collapse border-[3px] border-black text-center font-bold uppercase">
                        <thead>
                            <tr class="bg-black text-white">
                                <th class="p-4 text-left border-r-[3px] border-white">Device</th>
                                <th class="p-4 border-r-[3px] border-white bg-green-600">Excellent</th>
                                <th class="p-4 border-r-[3px] border-white bg-yellow-600">Good</th>
                                <th class="p-4">Fair</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="border-b-[3px] border-black bg-primary/10">
                                <td class="p-4 text-left border-r-[3px] border-black bg-white">iPhone 14 Pro Max</td>
                                <td class="p-4 border-r-[3px] border-black">$700</td>
                                <td class="p-4 border-r-[3px] border-black">$550</td>
                                <td class="p-4">$400</td>
                            </tr>
                            <tr class="border-b-[3px] border-black">
                                <td class="p-4 text-left border-r-[3px] border-black">iPhone 13 Pro</td>
                                <td class="p-4 border-r-[3px] border-black">$500</td>
                                <td class="p-4 border-r-[3px] border-black">$400</td>
                                <td class="p-4">$280</td>
                            </tr>
                             <tr class="border-b-[3px] border-black bg-primary/10">
                                <td class="p-4 text-left border-r-[3px] border-black bg-white">Samsung S23 Ultra</td>
                                <td class="p-4 border-r-[3px] border-black">$550</td>
                                <td class="p-4 border-r-[3px] border-black">$425</td>
                                <td class="p-4">$300</td>
                            </tr>
                             <tr class="border-b-[3px] border-black">
                                <td class="p-4 text-left border-r-[3px] border-black">iPad Pro 12.9" M2</td>
                                <td class="p-4 border-r-[3px] border-black">$800</td>
                                <td class="p-4 border-r-[3px] border-black">$650</td>
                                <td class="p-4">$450</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

             <!-- How It Works Timeline -->
             <section class="reveal-on-scroll border-b-[3px] border-black bg-primary p-12">
                <h2 class="text-4xl font-black uppercase text-center mb-12">3 Easy Steps To Get Paid</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center relative">
                    <!-- Connector line -->
                    <div class="hidden md:block absolute top-12 left-0 w-full h-[3px] bg-black z-0"></div>
                    
                    <div class="relative z-10 flex flex-col items-center">
                        <div class="w-24 h-24 bg-white border-[3px] border-black flex items-center justify-center text-4xl mb-6 shadow-[8px_8px_0px_0px_black]">
                            <span class="material-symbols-outlined text-5xl">calculate</span>
                        </div>
                        <h3 class="text-2xl font-black uppercase mb-2">1. Get Quote</h3>
                        <p class="font-bold">Instant online quote or visit our store. Takes 2 minutes.</p>
                    </div>

                    <div class="relative z-10 flex flex-col items-center">
                        <div class="w-24 h-24 bg-white border-[3px] border-black flex items-center justify-center text-4xl mb-6 shadow-[8px_8px_0px_0px_black]">
                            <span class="material-symbols-outlined text-5xl">inventory_2</span>
                        </div>
                        <h3 class="text-2xl font-black uppercase mb-2">2. Bring It In</h3>
                        <p class="font-bold">Mail it free with prepaid label or drop off at Brooklyn location.</p>
                    </div>

                    <div class="relative z-10 flex flex-col items-center">
                        <div class="w-24 h-24 bg-black text-primary border-[3px] border-black flex items-center justify-center text-4xl mb-6 shadow-[8px_8px_0px_0px_white]">
                            <span class="material-symbols-outlined text-5xl">payments</span>
                        </div>
                        <h3 class="text-2xl font-black uppercase mb-2">3. Get Paid</h3>
                        <p class="font-bold">Walk out with cash, check, or store credit same-day.</p>
                    </div>
                </div>
            </section>

            <!-- Payment Options -->
            <section class="reveal-on-scroll grid grid-cols-1 md:grid-cols-3 border-b-[3px] border-black bg-white">
                <div class="p-12 border-b-[3px] md:border-b-0 md:border-r-[3px] border-black text-center hover:bg-gray-50">
                    <span class="material-symbols-outlined text-6xl mb-4">attach_money</span>
                    <h3 class="text-2xl font-black uppercase mb-2">Instant Cash</h3>
                    <p class="font-bold text-gray-500">Walk out with money same day (In-store only)</p>
                </div>
                <div class="p-12 border-b-[3px] md:border-b-0 md:border-r-[3px] border-black text-center bg-primary/10 hover:bg-primary/20">
                    <span class="material-symbols-outlined text-6xl mb-4">card_giftcard</span>
                    <h3 class="text-2xl font-black uppercase mb-2">Store Credit</h3>
                    <p class="font-bold text-gray-500">Get <span class="bg-black text-primary px-1">20% EXTRA</span> value as store credit</p>
                </div>
                 <div class="p-12 text-center hover:bg-gray-50">
                    <span class="material-symbols-outlined text-6xl mb-4">account_balance</span>
                    <h3 class="text-2xl font-black uppercase mb-2">Check / PayPal</h3>
                    <p class="font-bold text-gray-500">Mailed or transferred within 2 days (Mail-in)</p>
                </div>
            </section>

            <!-- FAQ -->
            <section class="reveal-on-scroll bg-primary p-12 border-b-[3px] border-black">
                <h2 class="text-3xl font-black uppercase text-center mb-8">Selling FAQs</h2>
                 <div class="max-w-3xl mx-auto space-y-4">
                    <div class="bg-white border-[3px] border-black p-4">
                        <details>
                            <summary class="font-black uppercase list-none flex justify-between cursor-pointer">
                                <span>Do I need to include the charger?</span>
                                <span>+</span>
                            </summary>
                            <p class="mt-4 font-bold text-sm">No, we buy devices device-only. However, including original accessories might slightly increase your offer for certain items.</p>
                        </details>
                    </div>
                    <div class="bg-white border-[3px] border-black p-4">
                        <details>
                            <summary class="font-black uppercase list-none flex justify-between cursor-pointer">
                                <span>Do you buy broken phones?</span>
                                <span>+</span>
                            </summary>
                            <p class="mt-4 font-bold text-sm">Yes! We buy phones with cracked screens, bad batteries, and water damage. Just select "Poor" condition to get a quote.</p>
                        </details>
                    </div>
                    <div class="bg-white border-[3px] border-black p-4">
                        <details>
                            <summary class="font-black uppercase list-none flex justify-between cursor-pointer">
                                <span>Is my data safe?</span>
                                <span>+</span>
                            </summary>
                            <p class="mt-4 font-bold text-sm">Absolutely. We perform a DoD-standard specialized data wipe on every device before it goes into inventory. Your privacy is our priority.</p>
                        </details>
                    </div>
                </div>
            </section>

             <!-- Footer CTA -->
             <section class="reveal-on-scroll bg-hot-pink p-12 text-center border-b-[3px] border-black">
                <h2 class="text-4xl font-black uppercase mb-8 text-white tracking-tighter drop-shadow-[4px_4px_0px_black]">Ready to Sell?</h2>
                <div class="flex flex-col md:flex-row justify-center gap-6">
                    <button onclick="document.getElementById('calculator').scrollIntoView()" class="bg-black text-white px-12 py-6 text-xl font-black uppercase hover:bg-white hover:text-black border-[3px] border-black shadow-[8px_8px_0px_0px_white]">Get Instant Quote</button>
                    <button class="bg-transparent text-white px-12 py-6 text-xl font-black uppercase hover:bg-white hover:text-black border-[3px] border-white shadow-[8px_8px_0px_0px_black]">Call: (929) 789-2786</button>
                </div>
            </section>

            <!-- Footer -->
            <div class="bg-black text-white p-4 text-center">
                 <p class="text-xs font-bold uppercase tracking-widest text-white/40">¬© 2026 MOBILE EXPERTS INC.</p>
            </div>
        </div>
    </div>

    <!-- CALL OPT-IN POPUP -->
    <div id="callOptInModal" class="exit-modal-overlay">
      <div class="exit-modal-box">
        <button class="exit-close" onclick="closeCallOptIn()">√ó</button>
        <div class="exit-content">
          <div class="exit-emoji">üìû</div>
          <h2>Get an Instant Quote Over the Phone!</h2>
          <p class="exit-text">Speak with our experts now. <strong>No wait time!</strong></p>
          <a href="tel:9297892786" class="block w-full text-center bg-primary p-4 border-[3px] border-black font-black uppercase shadow-[6px_6px_0px_black] text-xl mb-3 hover:translate-x-1 hover:translate-y-1 hover:shadow-none active:scale-95">
            üì± Call (929) 789-2786
          </a>
          <button onclick="closeCallOptIn()" class="w-full text-center p-2 font-bold uppercase text-sm opacity-60 hover:opacity-100">Maybe Later</button>
        </div>
      </div>
    </div>

    <!-- EXIT INTENT MODAL -->
    <div id="exitModal" class="exit-modal-overlay">
      <div class="exit-modal-box">
        <button class="exit-close" onclick="closeExitModal()">√ó</button>
        <div class="exit-content">
          <div class="exit-emoji">üéÅ</div>
          <h2>Wait! Before you go...</h2>
          <p class="exit-text">Get your quote emailed + <strong>$10 OFF</strong> your first repair!</p>
          <form id="exitForm" onsubmit="submitExitEmail(event)">
            <input type="email" placeholder="Enter your email" required class="exit-email-input">
            <button type="submit" class="exit-submit-btn">üìß Send My Quote + $10 Coupon</button>
          </form>
          <p class="exit-trust">‚úì No spam ‚Ä¢ ‚úì Instant delivery ‚Ä¢ ‚úì Unsubscribe anytime</p>
        </div>
      </div>
    </div>

    <!-- CHATBOT WIDGET -->
    <div id="chatWidget" class="chat-widget">
      <button class="chat-bubble" id="chatBubble" onclick="openChat()">
        <span class="chat-icon">üí¨</span>
        <span class="chat-pulse"></span>
      </button>
      <div class="chat-window" id="chatWindow">
        <div class="chat-header">
          <div class="flex items-center gap-2">
            <div class="w-8 h-8 bg-black rounded-none flex items-center justify-center text-primary font-black">ü§ñ</div>
            <div>
              <span class="font-black block text-sm">TECHBOT</span>
              <span class="text-[10px] opacity-70">Online ‚Ä¢ Instant replies</span>
            </div>
          </div>
          <button onclick="closeChat()" class="text-xl font-black hover:scale-110">√ó</button>
        </div>
        <div class="chat-messages-area" id="chatMessagesArea">
          <div class="msg-bubble bot-msg">
            <p>üëã Hey! I'm TechBot, your instant assistant.</p>
            <p class="mt-1">What can I help you with today?</p>
          </div>
          <!-- Quick Reply Buttons -->
          <div id="quickReplies" class="quick-replies">
            <button onclick="quickReply('üí∞ Get a sell quote')" class="quick-btn">üí∞ Sell my device</button>
            <button onclick="quickReply('üîß Repair pricing')" class="quick-btn">üîß Repair pricing</button>
            <button onclick="quickReply('üì¶ Check inventory')" class="quick-btn">üì¶ Check inventory</button>
            <button onclick="quickReply('‚è∞ Store hours')" class="quick-btn">‚è∞ Store hours</button>
            <button onclick="quickReply('üìç Get directions')" class="quick-btn">üìç Get directions</button>
          </div>
        </div>
        <div class="chat-input-container">
          <input type="text" id="chatInput" onkeypress="chatKeyPress(event)" placeholder="Type a message...">
          <button onclick="sendChatMessage()" class="send-btn">
            <span class="material-symbols-outlined">send</span>
          </button>
        </div>
      </div>
    </div>

    <style>
    /* Modal Styles */
    .exit-modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.85); z-index: 100; align-items: center; justify-content: center; animation: fadeIn 0.2s ease; }
    .exit-modal-box { background: white; padding: 40px; border: 4px solid black; max-width: 450px; position: relative; box-shadow: 12px 12px 0px black; animation: scaleIn 0.2s ease; }
    .exit-close { position: absolute; top: 10px; right: 15px; font-size: 28px; cursor: pointer; font-weight: 900; transition: transform 0.1s; }
    .exit-close:hover { transform: scale(1.2); }
    .exit-email-input { width: 100%; padding: 14px; border: 3px solid black; margin-bottom: 12px; font-weight: 900; font-size: 14px; }
    .exit-submit-btn { width: 100%; padding: 16px; background: #FFD600; border: 3px solid black; font-weight: 900; box-shadow: 4px 4px 0px black; cursor: pointer; font-size: 14px; }
    .exit-submit-btn:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0px black; }
    .exit-emoji { font-size: 48px; margin-bottom: 16px; }
    .exit-text { font-weight: 700; margin-bottom: 20px; }
    .exit-trust { font-size: 11px; color: #666; margin-top: 12px; }

    /* Chat Widget Premium Styles */
    .chat-widget { position: fixed; bottom: 24px; right: 24px; z-index: 99; }
    .chat-bubble { width: 60px; height: 60px; border-radius: 0; border: 3px solid black; background: #ffd400; box-shadow: 6px 6px 0px black; cursor: pointer; font-size: 24px; display: flex; align-items: center; justify-content: center; position: relative; }
    .chat-bubble:hover { transform: translate(-2px, -2px); box-shadow: 8px 8px 0px black; }
    .chat-bubble:active { transform: translate(2px, 2px); box-shadow: 2px 2px 0px black; }
    .chat-pulse { position: absolute; top: -4px; right: -4px; width: 14px; height: 14px; background: #FF00FF; border: 2px solid black; animation: pulse 2s infinite; }
    .chat-window { position: fixed; bottom: 24px; right: 24px; width: 340px; height: 480px; background: white; border: 4px solid black; display: none; flex-direction: column; box-shadow: 12px 12px 0px black; animation: slideUp 0.2s ease; }
    .chat-header { background: #ffd400; padding: 12px; border-bottom: 3px solid black; display: flex; justify-content: space-between; align-items: center; }
    .chat-messages-area { flex: 1; overflow-y: auto; padding: 16px; background: #fafafa; }
    .chat-input-container { padding: 12px; border-top: 3px solid black; display: flex; gap: 8px; background: white; }
    .chat-input-container input { flex: 1; padding: 12px; border: 3px solid black; font-weight: 700; font-size: 13px; }
    .chat-input-container input:focus { outline: none; box-shadow: 4px 4px 0px #ffd400; }
    .send-btn { background: black; color: #ffd400; border: 3px solid black; padding: 0 16px; cursor: pointer; display: flex; align-items: center; }
    .send-btn:hover { background: #ffd400; color: black; }
    .send-btn:active { transform: scale(0.95); }

    /* Chat Messages */
    .msg-bubble { padding: 12px 16px; border: 2px solid black; margin-bottom: 12px; font-size: 13px; font-weight: 600; line-height: 1.5; animation: fadeIn 0.2s ease; }
    .bot-msg { background: white; box-shadow: 3px 3px 0px black; margin-right: 20px; }
    .user-msg { background: #ffd400; box-shadow: 3px 3px 0px black; margin-left: 20px; text-align: right; }

    /* Quick Reply Buttons */
    .quick-replies { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
    .quick-btn { padding: 8px 12px; font-size: 12px; font-weight: 700; background: white; border: 2px solid black; cursor: pointer; box-shadow: 2px 2px 0px black; white-space: nowrap; }
    .quick-btn:hover { background: #ffd400; transform: translate(-1px, -1px); box-shadow: 3px 3px 0px black; }
    .quick-btn:active { transform: translate(1px, 1px); box-shadow: 1px 1px 0px black; }

    /* FAQ Accordion Animations */
    details summary { cursor: pointer; list-style: none; }
    details summary::-webkit-details-marker { display: none; }
    details[open] summary ~ * { animation: fadeSlide 0.2s ease; }

    /* Subtle Animations */
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes scaleIn { from { opacity: 0; transform: scale(0.9); } to { opacity: 1; transform: scale(1); } }
    @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes fadeSlide { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }
    @keyframes pulse { 0%, 100% { transform: scale(1); opacity: 1; } 50% { transform: scale(1.2); opacity: 0.7; } }

    /* Active Button States */
    button:active, a.block:active { transform: scale(0.98) !important; }
    </style>

    <script>
    const GROQ_KEY = ""; // Placeholder - Add your API key here
    
    // MOBILE MENU
    const openMenuBtn = document.getElementById('open-menu');
    const closeMenuBtn = document.getElementById('close-menu');
    const mobileMenu = document.getElementById('mobile-menu');
    const menuOverlay = document.getElementById('menu-overlay');
    function toggleMenu(show) {
      if (show) { mobileMenu.classList.remove('translate-x-full'); mobileMenu.classList.add('drawer-open'); menuOverlay.classList.remove('hidden'); }
      else { mobileMenu.classList.add('translate-x-full'); mobileMenu.classList.remove('drawer-open'); menuOverlay.classList.add('hidden'); }
    }
    openMenuBtn.onclick = () => toggleMenu(true);
    closeMenuBtn.onclick = () => toggleMenu(false);
    menuOverlay.onclick = () => toggleMenu(false);

    // SCROLL ANIMATIONS
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('is-visible'); });
    }, { threshold: 0.1 });
    document.querySelectorAll('.reveal-on-scroll').forEach(el => observer.observe(el));

    // CALL OPT-IN POPUP (after 5 seconds)
    setTimeout(() => {
      if (!sessionStorage.getItem('callOptInShown')) {
        document.getElementById('callOptInModal').style.display = 'flex';
        sessionStorage.setItem('callOptInShown', 'true');
      }
    }, 5000);
    function closeCallOptIn() { document.getElementById('callOptInModal').style.display = 'none'; }

    // EXIT INTENT
    let exitShown = false;
    document.addEventListener('mouseleave', (e) => {
      if (e.clientY < 10 && !exitShown && !sessionStorage.getItem('exitShown')) {
        document.getElementById('exitModal').style.display = 'flex';
        exitShown = true;
        sessionStorage.setItem('exitShown', 'true');
      }
    });
    function closeExitModal() { document.getElementById('exitModal').style.display = 'none'; }

    // LOCK IN OFFER & EMAIL QUOTE
    function lockInOffer() {
      alert('‚úÖ Your offer has been locked in for 48 hours! Visit our store or call (929) 789-2786 to complete your trade-in.');
    }
    function emailQuote() {
      const email = prompt('Enter your email to receive your quote:');
      if (email && email.includes('@')) {
        alert(`üìß Quote sent to ${email}! Check your inbox.`);
      }
    }

    // CHATBOT
    function openChat() { 
      document.getElementById('chatWindow').style.display = 'flex'; 
      document.getElementById('chatBubble').style.display = 'none';
    }
    function closeChat() { 
      document.getElementById('chatWindow').style.display = 'none'; 
      document.getElementById('chatBubble').style.display = 'flex';
    }
    function chatKeyPress(e) { if(e.key === 'Enter') sendChatMessage(); }

    // QUICK REPLY HANDLER
    function quickReply(message) {
      const area = document.getElementById('chatMessagesArea');
      const quickRepliesEl = document.getElementById('quickReplies');
      
      // Hide quick replies after use
      if (quickRepliesEl) quickRepliesEl.style.display = 'none';
      
      // Add user message
      area.innerHTML += `<div class="msg-bubble user-msg">${message}</div>`;
      
      // Prepare contextual responses
      const responses = {
        'üí∞ Get a sell quote': 'üí∞ Great! To get an instant quote, use our calculator above. Select your device type, brand, model, and condition. We pay top dollar and offer same-day payment!',
        'üîß Repair pricing': 'üîß Our repair prices:\n‚Ä¢ Screen repair: $49-$299\n‚Ä¢ Battery: $39-$99\n‚Ä¢ Charging port: $49-$99\n‚Ä¢ Water damage: $79-$199\n\nMost repairs done in under an hour!',
        'üì¶ Check inventory': 'üì¶ We have a fresh selection of certified pre-owned phones, tablets, and laptops. Visit our Inventory page to see what\'s in stock. New arrivals daily!',
        '‚è∞ Store hours': '‚è∞ We\'re open 7 days a week!\n‚Ä¢ Mon-Sat: 10AM - 8PM\n‚Ä¢ Sunday: 11AM - 6PM\n\nüìç 1134 Liberty Ave, Brooklyn',
        'üìç Get directions': 'üìç We\'re at 1134 Liberty Ave, Brooklyn NY 11208.\n\nüöó Street parking available\nüöá A Train to Grant Ave\n\n<a href="https://www.google.com/maps/dir/?api=1&destination=1134+Liberty+Ave+Brooklyn+NY+11208" target="_blank" class="underline font-black">‚Üí Open in Google Maps</a>'
      };
      
      // Bot response
      setTimeout(() => {
        const reply = responses[message] || 'ü§ñ Happy to help! For immediate assistance, call us at (929) 789-2786.';
        area.innerHTML += `<div class="msg-bubble bot-msg">${reply.replace(/\n/g, '<br>')}</div>`;
        area.scrollTop = area.scrollHeight;
      }, 500);
      
      area.scrollTop = area.scrollHeight;
    }
    
    async function sendChatMessage() {
      const input = document.getElementById('chatInput');
      const text = input.value.trim();
      if (!text) return;
      
      const area = document.getElementById('chatMessagesArea');
      const quickRepliesEl = document.getElementById('quickReplies');
      if (quickRepliesEl) quickRepliesEl.style.display = 'none';
      
      area.innerHTML += `<div class="msg-bubble user-msg">${text}</div>`;
      input.value = '';
      area.scrollTop = area.scrollHeight;

      // Show typing indicator
      area.innerHTML += `<div id="typingIndicator" class="msg-bubble bot-msg opacity-60">ü§ñ Typing...</div>`;

      try {
        if (!GROQ_KEY) throw new Error('No API key');
        const res = await fetch("https://api.groq.com/openai/v1/chat/completions", {
          method: "POST",
          headers: { "Content-Type": "application/json", "Authorization": `Bearer ${GROQ_KEY}` },
          body: JSON.stringify({
            messages: [
              { role: "system", content: "You are TechBot, a helpful assistant for Mobile Experts Brooklyn (phone repair & buyback store). Be brief, helpful, and use the brutalist style. Store hours: Mon-Sat 10AM-8PM, Sun 11AM-6PM. Phone: (929) 789-2786. Address: 1134 Liberty Ave, Brooklyn NY 11208." },
              { role: "user", content: text }
            ],
            model: "llama3-8b-8192"
          })
        });
        const data = await res.json();
        document.getElementById('typingIndicator')?.remove();
        const reply = data.choices[0].message.content;
        area.innerHTML += `<div class="msg-bubble bot-msg">ü§ñ ${reply}</div>`;
      } catch (e) {
        document.getElementById('typingIndicator')?.remove();
        area.innerHTML += `<div class="msg-bubble bot-msg">ü§ñ I'm here to help! For the fastest response, call us at <a href="tel:9297892786" class="underline font-black">(929) 789-2786</a></div>`;
      }
      area.scrollTop = area.scrollHeight;
    }

    // NAVIGATE TO GOOGLE MAPS
    function navigateToMaps() {
      window.open('https://www.google.com/maps/dir/?api=1&destination=1134+Liberty+Ave+Brooklyn+NY+11208', '_blank');
    }
    </script>
</body>
</html>
